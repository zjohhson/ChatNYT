{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst InitFragment = require(\"./InitFragment\");\n\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC,\n  JAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"./ModuleTypeConstants\");\n\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\n\nconst WebpackError = require(\"./WebpackError\");\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst BasicEvaluatedExpression = require(\"./javascript/BasicEvaluatedExpression\");\n\nconst JavascriptModulesPlugin = require(\"./javascript/JavascriptModulesPlugin\");\n\nconst {\n  toConstantDependency,\n  evaluateToString\n} = require(\"./javascript/JavascriptParserHelpers\");\n\nconst ChunkNameRuntimeModule = require(\"./runtime/ChunkNameRuntimeModule\");\n\nconst GetFullHashRuntimeModule = require(\"./runtime/GetFullHashRuntimeModule\");\n/** @typedef {import(\"./Compiler\")} Compiler */\n\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n\n/**\n * @param {boolean} module true if ES module\n * @param {string} importMetaName `import.meta` name\n * @returns {Record<string, {expr: string, req: string[] | null, type?: string, assign: boolean}>} replacements\n */\n\n\nfunction getReplacements(module, importMetaName) {\n  return {\n    __webpack_require__: {\n      expr: RuntimeGlobals.require,\n      req: [RuntimeGlobals.require],\n      type: \"function\",\n      assign: false\n    },\n    __webpack_public_path__: {\n      expr: RuntimeGlobals.publicPath,\n      req: [RuntimeGlobals.publicPath],\n      type: \"string\",\n      assign: true\n    },\n    __webpack_base_uri__: {\n      expr: RuntimeGlobals.baseURI,\n      req: [RuntimeGlobals.baseURI],\n      type: \"string\",\n      assign: true\n    },\n    __webpack_modules__: {\n      expr: RuntimeGlobals.moduleFactories,\n      req: [RuntimeGlobals.moduleFactories],\n      type: \"object\",\n      assign: false\n    },\n    __webpack_chunk_load__: {\n      expr: RuntimeGlobals.ensureChunk,\n      req: [RuntimeGlobals.ensureChunk],\n      type: \"function\",\n      assign: true\n    },\n    __non_webpack_require__: {\n      expr: module ? `__WEBPACK_EXTERNAL_createRequire(${importMetaName}.url)` : \"require\",\n      req: null,\n      type: undefined,\n      // type is not known, depends on environment\n      assign: true\n    },\n    __webpack_nonce__: {\n      expr: RuntimeGlobals.scriptNonce,\n      req: [RuntimeGlobals.scriptNonce],\n      type: \"string\",\n      assign: true\n    },\n    __webpack_hash__: {\n      expr: `${RuntimeGlobals.getFullHash}()`,\n      req: [RuntimeGlobals.getFullHash],\n      type: \"string\",\n      assign: false\n    },\n    __webpack_chunkname__: {\n      expr: RuntimeGlobals.chunkName,\n      req: [RuntimeGlobals.chunkName],\n      type: \"string\",\n      assign: false\n    },\n    __webpack_get_script_filename__: {\n      expr: RuntimeGlobals.getChunkScriptFilename,\n      req: [RuntimeGlobals.getChunkScriptFilename],\n      type: \"function\",\n      assign: true\n    },\n    __webpack_runtime_id__: {\n      expr: RuntimeGlobals.runtimeId,\n      req: [RuntimeGlobals.runtimeId],\n      assign: false\n    },\n    \"require.onError\": {\n      expr: RuntimeGlobals.uncaughtErrorHandler,\n      req: [RuntimeGlobals.uncaughtErrorHandler],\n      type: undefined,\n      // type is not known, could be function or undefined\n      assign: true // is never a pattern\n\n    },\n    __system_context__: {\n      expr: RuntimeGlobals.systemContext,\n      req: [RuntimeGlobals.systemContext],\n      type: \"object\",\n      assign: false\n    },\n    __webpack_share_scopes__: {\n      expr: RuntimeGlobals.shareScopeMap,\n      req: [RuntimeGlobals.shareScopeMap],\n      type: \"object\",\n      assign: false\n    },\n    __webpack_init_sharing__: {\n      expr: RuntimeGlobals.initializeSharing,\n      req: [RuntimeGlobals.initializeSharing],\n      type: \"function\",\n      assign: true\n    }\n  };\n}\n\nconst PLUGIN_NAME = \"APIPlugin\";\n/**\n * @typedef {Object} APIPluginOptions\n * @property {boolean} [module] the output filename\n */\n\nclass APIPlugin {\n  /**\n   * @param {APIPluginOptions} [options] options\n   */\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.options = options;\n  }\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      const {\n        importMetaName\n      } = compilation.outputOptions;\n      const REPLACEMENTS = getReplacements(this.options.module, importMetaName);\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.chunkName).tap(PLUGIN_NAME, chunk => {\n        compilation.addRuntimeModule(chunk, new ChunkNameRuntimeModule(chunk.name));\n        return true;\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.getFullHash).tap(PLUGIN_NAME, (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new GetFullHashRuntimeModule());\n        return true;\n      });\n      const hooks = JavascriptModulesPlugin.getCompilationHooks(compilation);\n      hooks.renderModuleContent.tap(PLUGIN_NAME, (source, module, renderContext) => {\n        if (module.buildInfo.needCreateRequire) {\n          const chunkInitFragments = [new InitFragment('import { createRequire as __WEBPACK_EXTERNAL_createRequire } from \"module\";\\n', InitFragment.STAGE_HARMONY_IMPORTS, 0, \"external module node-commonjs\")];\n          renderContext.chunkInitFragments.push(...chunkInitFragments);\n        }\n\n        return source;\n      });\n      /**\n       * @param {JavascriptParser} parser the parser\n       */\n\n      const handler = parser => {\n        Object.keys(REPLACEMENTS).forEach(key => {\n          const info = REPLACEMENTS[key];\n          parser.hooks.expression.for(key).tap(PLUGIN_NAME, expression => {\n            const dep = toConstantDependency(parser, info.expr, info.req);\n\n            if (key === \"__non_webpack_require__\" && this.options.module) {\n              parser.state.module.buildInfo.needCreateRequire = true;\n            }\n\n            return dep(expression);\n          });\n\n          if (info.assign === false) {\n            parser.hooks.assign.for(key).tap(PLUGIN_NAME, expr => {\n              const err = new WebpackError(`${key} must not be assigned`);\n              err.loc = expr.loc;\n              throw err;\n            });\n          }\n\n          if (info.type) {\n            parser.hooks.evaluateTypeof.for(key).tap(PLUGIN_NAME, evaluateToString(info.type));\n          }\n        });\n        parser.hooks.expression.for(\"__webpack_layer__\").tap(PLUGIN_NAME, expr => {\n          const dep = new ConstDependency(JSON.stringify(parser.state.module.layer), expr.range);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateIdentifier.for(\"__webpack_layer__\").tap(PLUGIN_NAME, expr => (parser.state.module.layer === null ? new BasicEvaluatedExpression().setNull() : new BasicEvaluatedExpression().setString(parser.state.module.layer)).setRange(expr.range));\n        parser.hooks.evaluateTypeof.for(\"__webpack_layer__\").tap(PLUGIN_NAME, expr => new BasicEvaluatedExpression().setString(parser.state.module.layer === null ? \"object\" : \"string\").setRange(expr.range));\n        parser.hooks.expression.for(\"__webpack_module__.id\").tap(PLUGIN_NAME, expr => {\n          parser.state.module.buildInfo.moduleConcatenationBailout = \"__webpack_module__.id\";\n          const dep = new ConstDependency(parser.state.module.moduleArgument + \".id\", expr.range, [RuntimeGlobals.moduleId]);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.expression.for(\"__webpack_module__\").tap(PLUGIN_NAME, expr => {\n          parser.state.module.buildInfo.moduleConcatenationBailout = \"__webpack_module__\";\n          const dep = new ConstDependency(parser.state.module.moduleArgument, expr.range, [RuntimeGlobals.module]);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateTypeof.for(\"__webpack_module__\").tap(PLUGIN_NAME, evaluateToString(\"object\"));\n      };\n\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_ESM).tap(PLUGIN_NAME, handler);\n    });\n  }\n\n}\n\nmodule.exports = APIPlugin;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/APIPlugin.js"],"names":["InitFragment","require","JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","JAVASCRIPT_MODULE_TYPE_ESM","RuntimeGlobals","WebpackError","ConstDependency","BasicEvaluatedExpression","JavascriptModulesPlugin","toConstantDependency","evaluateToString","ChunkNameRuntimeModule","GetFullHashRuntimeModule","getReplacements","module","importMetaName","__webpack_require__","expr","req","type","assign","__webpack_public_path__","publicPath","__webpack_base_uri__","baseURI","__webpack_modules__","moduleFactories","__webpack_chunk_load__","ensureChunk","__non_webpack_require__","undefined","__webpack_nonce__","scriptNonce","__webpack_hash__","getFullHash","__webpack_chunkname__","chunkName","__webpack_get_script_filename__","getChunkScriptFilename","__webpack_runtime_id__","runtimeId","uncaughtErrorHandler","__system_context__","systemContext","__webpack_share_scopes__","shareScopeMap","__webpack_init_sharing__","initializeSharing","PLUGIN_NAME","APIPlugin","constructor","options","apply","compiler","hooks","compilation","tap","normalModuleFactory","outputOptions","REPLACEMENTS","dependencyTemplates","set","Template","runtimeRequirementInTree","for","chunk","addRuntimeModule","name","getCompilationHooks","renderModuleContent","source","renderContext","buildInfo","needCreateRequire","chunkInitFragments","STAGE_HARMONY_IMPORTS","push","handler","parser","Object","keys","forEach","key","info","expression","dep","state","err","loc","evaluateTypeof","JSON","stringify","layer","range","addPresentationalDependency","evaluateIdentifier","setNull","setString","setRange","moduleConcatenationBailout","moduleArgument","moduleId","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst InitFragment = require(\"./InitFragment\");\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC,\n\tJAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"./ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\nconst WebpackError = require(\"./WebpackError\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst BasicEvaluatedExpression = require(\"./javascript/BasicEvaluatedExpression\");\nconst JavascriptModulesPlugin = require(\"./javascript/JavascriptModulesPlugin\");\nconst {\n\ttoConstantDependency,\n\tevaluateToString\n} = require(\"./javascript/JavascriptParserHelpers\");\nconst ChunkNameRuntimeModule = require(\"./runtime/ChunkNameRuntimeModule\");\nconst GetFullHashRuntimeModule = require(\"./runtime/GetFullHashRuntimeModule\");\n\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n\n/**\n * @param {boolean} module true if ES module\n * @param {string} importMetaName `import.meta` name\n * @returns {Record<string, {expr: string, req: string[] | null, type?: string, assign: boolean}>} replacements\n */\nfunction getReplacements(module, importMetaName) {\n\treturn {\n\t\t__webpack_require__: {\n\t\t\texpr: RuntimeGlobals.require,\n\t\t\treq: [RuntimeGlobals.require],\n\t\t\ttype: \"function\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_public_path__: {\n\t\t\texpr: RuntimeGlobals.publicPath,\n\t\t\treq: [RuntimeGlobals.publicPath],\n\t\t\ttype: \"string\",\n\t\t\tassign: true\n\t\t},\n\t\t__webpack_base_uri__: {\n\t\t\texpr: RuntimeGlobals.baseURI,\n\t\t\treq: [RuntimeGlobals.baseURI],\n\t\t\ttype: \"string\",\n\t\t\tassign: true\n\t\t},\n\t\t__webpack_modules__: {\n\t\t\texpr: RuntimeGlobals.moduleFactories,\n\t\t\treq: [RuntimeGlobals.moduleFactories],\n\t\t\ttype: \"object\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_chunk_load__: {\n\t\t\texpr: RuntimeGlobals.ensureChunk,\n\t\t\treq: [RuntimeGlobals.ensureChunk],\n\t\t\ttype: \"function\",\n\t\t\tassign: true\n\t\t},\n\t\t__non_webpack_require__: {\n\t\t\texpr: module\n\t\t\t\t? `__WEBPACK_EXTERNAL_createRequire(${importMetaName}.url)`\n\t\t\t\t: \"require\",\n\t\t\treq: null,\n\t\t\ttype: undefined, // type is not known, depends on environment\n\t\t\tassign: true\n\t\t},\n\t\t__webpack_nonce__: {\n\t\t\texpr: RuntimeGlobals.scriptNonce,\n\t\t\treq: [RuntimeGlobals.scriptNonce],\n\t\t\ttype: \"string\",\n\t\t\tassign: true\n\t\t},\n\t\t__webpack_hash__: {\n\t\t\texpr: `${RuntimeGlobals.getFullHash}()`,\n\t\t\treq: [RuntimeGlobals.getFullHash],\n\t\t\ttype: \"string\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_chunkname__: {\n\t\t\texpr: RuntimeGlobals.chunkName,\n\t\t\treq: [RuntimeGlobals.chunkName],\n\t\t\ttype: \"string\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_get_script_filename__: {\n\t\t\texpr: RuntimeGlobals.getChunkScriptFilename,\n\t\t\treq: [RuntimeGlobals.getChunkScriptFilename],\n\t\t\ttype: \"function\",\n\t\t\tassign: true\n\t\t},\n\t\t__webpack_runtime_id__: {\n\t\t\texpr: RuntimeGlobals.runtimeId,\n\t\t\treq: [RuntimeGlobals.runtimeId],\n\t\t\tassign: false\n\t\t},\n\t\t\"require.onError\": {\n\t\t\texpr: RuntimeGlobals.uncaughtErrorHandler,\n\t\t\treq: [RuntimeGlobals.uncaughtErrorHandler],\n\t\t\ttype: undefined, // type is not known, could be function or undefined\n\t\t\tassign: true // is never a pattern\n\t\t},\n\t\t__system_context__: {\n\t\t\texpr: RuntimeGlobals.systemContext,\n\t\t\treq: [RuntimeGlobals.systemContext],\n\t\t\ttype: \"object\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_share_scopes__: {\n\t\t\texpr: RuntimeGlobals.shareScopeMap,\n\t\t\treq: [RuntimeGlobals.shareScopeMap],\n\t\t\ttype: \"object\",\n\t\t\tassign: false\n\t\t},\n\t\t__webpack_init_sharing__: {\n\t\t\texpr: RuntimeGlobals.initializeSharing,\n\t\t\treq: [RuntimeGlobals.initializeSharing],\n\t\t\ttype: \"function\",\n\t\t\tassign: true\n\t\t}\n\t};\n}\n\nconst PLUGIN_NAME = \"APIPlugin\";\n\n/**\n * @typedef {Object} APIPluginOptions\n * @property {boolean} [module] the output filename\n */\n\nclass APIPlugin {\n\t/**\n\t * @param {APIPluginOptions} [options] options\n\t */\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t}\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tconst { importMetaName } = compilation.outputOptions;\n\t\t\t\tconst REPLACEMENTS = getReplacements(\n\t\t\t\t\tthis.options.module,\n\t\t\t\t\timportMetaName\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.chunkName)\n\t\t\t\t\t.tap(PLUGIN_NAME, chunk => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew ChunkNameRuntimeModule(chunk.name)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.getFullHash)\n\t\t\t\t\t.tap(PLUGIN_NAME, (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(chunk, new GetFullHashRuntimeModule());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\tconst hooks = JavascriptModulesPlugin.getCompilationHooks(compilation);\n\n\t\t\t\thooks.renderModuleContent.tap(\n\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t(source, module, renderContext) => {\n\t\t\t\t\t\tif (module.buildInfo.needCreateRequire) {\n\t\t\t\t\t\t\tconst chunkInitFragments = [\n\t\t\t\t\t\t\t\tnew InitFragment(\n\t\t\t\t\t\t\t\t\t'import { createRequire as __WEBPACK_EXTERNAL_createRequire } from \"module\";\\n',\n\t\t\t\t\t\t\t\t\tInitFragment.STAGE_HARMONY_IMPORTS,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\"external module node-commonjs\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\trenderContext.chunkInitFragments.push(...chunkInitFragments);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn source;\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t/**\n\t\t\t\t * @param {JavascriptParser} parser the parser\n\t\t\t\t */\n\t\t\t\tconst handler = parser => {\n\t\t\t\t\tObject.keys(REPLACEMENTS).forEach(key => {\n\t\t\t\t\t\tconst info = REPLACEMENTS[key];\n\t\t\t\t\t\tparser.hooks.expression.for(key).tap(PLUGIN_NAME, expression => {\n\t\t\t\t\t\t\tconst dep = toConstantDependency(parser, info.expr, info.req);\n\n\t\t\t\t\t\t\tif (key === \"__non_webpack_require__\" && this.options.module) {\n\t\t\t\t\t\t\t\tparser.state.module.buildInfo.needCreateRequire = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn dep(expression);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (info.assign === false) {\n\t\t\t\t\t\t\tparser.hooks.assign.for(key).tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t\tconst err = new WebpackError(`${key} must not be assigned`);\n\t\t\t\t\t\t\t\terr.loc = expr.loc;\n\t\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (info.type) {\n\t\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(info.type));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tJSON.stringify(parser.state.module.layer),\n\t\t\t\t\t\t\t\texpr.range\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr =>\n\t\t\t\t\t\t\t(parser.state.module.layer === null\n\t\t\t\t\t\t\t\t? new BasicEvaluatedExpression().setNull()\n\t\t\t\t\t\t\t\t: new BasicEvaluatedExpression().setString(\n\t\t\t\t\t\t\t\t\t\tparser.state.module.layer\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t).setRange(expr.range)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr =>\n\t\t\t\t\t\t\tnew BasicEvaluatedExpression()\n\t\t\t\t\t\t\t\t.setString(\n\t\t\t\t\t\t\t\t\tparser.state.module.layer === null ? \"object\" : \"string\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.setRange(expr.range)\n\t\t\t\t\t\t);\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_module__.id\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tparser.state.module.buildInfo.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"__webpack_module__.id\";\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tparser.state.module.moduleArgument + \".id\",\n\t\t\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\t\t\t[RuntimeGlobals.moduleId]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_module__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tparser.state.module.buildInfo.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"__webpack_module__\";\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tparser.state.module.moduleArgument,\n\t\t\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\t\t\t[RuntimeGlobals.module]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"__webpack_module__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"object\"));\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_ESM)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = APIPlugin;\n"]},"metadata":{},"sourceType":"script"}