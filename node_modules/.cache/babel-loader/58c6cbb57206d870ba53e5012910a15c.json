{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\"use strict\";\n\nconst {\n  SyncWaterfallHook\n} = require(\"tapable\");\n\nconst Compilation = require(\"../Compilation\");\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\n\nconst Template = require(\"../Template\");\n\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n/** @typedef {import(\"../Chunk\")} Chunk */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/**\n * @typedef {Object} LoadScriptCompilationHooks\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\n */\n\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\n\n\nconst compilationHooksMap = new WeakMap();\n\nclass LoadScriptRuntimeModule extends HelperRuntimeModule {\n  /**\n   * @param {Compilation} compilation the compilation\n   * @returns {LoadScriptCompilationHooks} hooks\n   */\n  static getCompilationHooks(compilation) {\n    if (!(compilation instanceof Compilation)) {\n      throw new TypeError(\"The 'compilation' argument must be an instance of Compilation\");\n    }\n\n    let hooks = compilationHooksMap.get(compilation);\n\n    if (hooks === undefined) {\n      hooks = {\n        createScript: new SyncWaterfallHook([\"source\", \"chunk\"])\n      };\n      compilationHooksMap.set(compilation, hooks);\n    }\n\n    return hooks;\n  }\n  /**\n   * @param {boolean=} withCreateScriptUrl use create script url for trusted types\n   * @param {boolean=} withFetchPriority use `fetchPriority` attribute\n   */\n\n\n  constructor(withCreateScriptUrl, withFetchPriority) {\n    super(\"load script\");\n    this._withCreateScriptUrl = withCreateScriptUrl;\n    this._withFetchPriority = withFetchPriority;\n  }\n  /**\n   * @returns {string | null} runtime code\n   */\n\n\n  generate() {\n    const compilation =\n    /** @type {Compilation} */\n    this.compilation;\n    const {\n      runtimeTemplate,\n      outputOptions\n    } = compilation;\n    const {\n      scriptType,\n      chunkLoadTimeout: loadTimeout,\n      crossOriginLoading,\n      uniqueName,\n      charset\n    } = outputOptions;\n    const fn = RuntimeGlobals.loadScript;\n    const {\n      createScript\n    } = LoadScriptRuntimeModule.getCompilationHooks(compilation);\n    const code = Template.asString([\"script = document.createElement('script');\", scriptType ? `script.type = ${JSON.stringify(scriptType)};` : \"\", charset ? \"script.charset = 'utf-8';\" : \"\", `script.timeout = ${\n    /** @type {number} */\n    loadTimeout / 1000};`, `if (${RuntimeGlobals.scriptNonce}) {`, Template.indent(`script.setAttribute(\"nonce\", ${RuntimeGlobals.scriptNonce});`), \"}\", uniqueName ? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);' : \"\", this._withFetchPriority ? Template.asString([\"if(fetchPriority) {\", Template.indent('script.setAttribute(\"fetchpriority\", fetchPriority);'), \"}\"]) : \"\", `script.src = ${this._withCreateScriptUrl ? `${RuntimeGlobals.createScriptUrl}(url)` : \"url\"};`, crossOriginLoading ? crossOriginLoading === \"use-credentials\" ? 'script.crossOrigin = \"use-credentials\";' : Template.asString([\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\", Template.indent(`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`), \"}\"]) : \"\"]);\n    return Template.asString([\"var inProgress = {};\", uniqueName ? `var dataWebpackPrefix = ${JSON.stringify(uniqueName + \":\")};` : \"// data-webpack is not used as build has no uniqueName\", \"// loadScript function to load a script via script tag\", `${fn} = ${runtimeTemplate.basicFunction(`url, done, key, chunkId${this._withFetchPriority ? \", fetchPriority\" : \"\"}`, [\"if(inProgress[url]) { inProgress[url].push(done); return; }\", \"var script, needAttach;\", \"if(key !== undefined) {\", Template.indent(['var scripts = document.getElementsByTagName(\"script\");', \"for(var i = 0; i < scripts.length; i++) {\", Template.indent([\"var s = scripts[i];\", `if(s.getAttribute(\"src\") == url${uniqueName ? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key' : \"\"}) { script = s; break; }`]), \"}\"]), \"}\", \"if(!script) {\", Template.indent([\"needAttach = true;\", createScript.call(code,\n    /** @type {Chunk} */\n    this.chunk)]), \"}\", \"inProgress[url] = [done];\", \"var onScriptComplete = \" + runtimeTemplate.basicFunction(\"prev, event\", Template.asString([\"// avoid mem leaks in IE.\", \"script.onerror = script.onload = null;\", \"clearTimeout(timeout);\", \"var doneFns = inProgress[url];\", \"delete inProgress[url];\", \"script.parentNode && script.parentNode.removeChild(script);\", `doneFns && doneFns.forEach(${runtimeTemplate.returningFunction(\"fn(event)\", \"fn\")});`, \"if(prev) return prev(event);\"])), `var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), ${loadTimeout});`, \"script.onerror = onScriptComplete.bind(null, script.onerror);\", \"script.onload = onScriptComplete.bind(null, script.onload);\", \"needAttach && document.head.appendChild(script);\"])};`]);\n  }\n\n}\n\nmodule.exports = LoadScriptRuntimeModule;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/runtime/LoadScriptRuntimeModule.js"],"names":["SyncWaterfallHook","require","Compilation","RuntimeGlobals","Template","HelperRuntimeModule","compilationHooksMap","WeakMap","LoadScriptRuntimeModule","getCompilationHooks","compilation","TypeError","hooks","get","undefined","createScript","set","constructor","withCreateScriptUrl","withFetchPriority","_withCreateScriptUrl","_withFetchPriority","generate","runtimeTemplate","outputOptions","scriptType","chunkLoadTimeout","loadTimeout","crossOriginLoading","uniqueName","charset","fn","loadScript","code","asString","JSON","stringify","scriptNonce","indent","createScriptUrl","basicFunction","call","chunk","returningFunction","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\n\"use strict\";\n\nconst { SyncWaterfallHook } = require(\"tapable\");\nconst Compilation = require(\"../Compilation\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/**\n * @typedef {Object} LoadScriptCompilationHooks\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\n */\n\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\nconst compilationHooksMap = new WeakMap();\n\nclass LoadScriptRuntimeModule extends HelperRuntimeModule {\n\t/**\n\t * @param {Compilation} compilation the compilation\n\t * @returns {LoadScriptCompilationHooks} hooks\n\t */\n\tstatic getCompilationHooks(compilation) {\n\t\tif (!(compilation instanceof Compilation)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"The 'compilation' argument must be an instance of Compilation\"\n\t\t\t);\n\t\t}\n\t\tlet hooks = compilationHooksMap.get(compilation);\n\t\tif (hooks === undefined) {\n\t\t\thooks = {\n\t\t\t\tcreateScript: new SyncWaterfallHook([\"source\", \"chunk\"])\n\t\t\t};\n\t\t\tcompilationHooksMap.set(compilation, hooks);\n\t\t}\n\t\treturn hooks;\n\t}\n\n\t/**\n\t * @param {boolean=} withCreateScriptUrl use create script url for trusted types\n\t * @param {boolean=} withFetchPriority use `fetchPriority` attribute\n\t */\n\tconstructor(withCreateScriptUrl, withFetchPriority) {\n\t\tsuper(\"load script\");\n\t\tthis._withCreateScriptUrl = withCreateScriptUrl;\n\t\tthis._withFetchPriority = withFetchPriority;\n\t}\n\n\t/**\n\t * @returns {string | null} runtime code\n\t */\n\tgenerate() {\n\t\tconst compilation = /** @type {Compilation} */ (this.compilation);\n\t\tconst { runtimeTemplate, outputOptions } = compilation;\n\t\tconst {\n\t\t\tscriptType,\n\t\t\tchunkLoadTimeout: loadTimeout,\n\t\t\tcrossOriginLoading,\n\t\t\tuniqueName,\n\t\t\tcharset\n\t\t} = outputOptions;\n\t\tconst fn = RuntimeGlobals.loadScript;\n\n\t\tconst { createScript } =\n\t\t\tLoadScriptRuntimeModule.getCompilationHooks(compilation);\n\n\t\tconst code = Template.asString([\n\t\t\t\"script = document.createElement('script');\",\n\t\t\tscriptType ? `script.type = ${JSON.stringify(scriptType)};` : \"\",\n\t\t\tcharset ? \"script.charset = 'utf-8';\" : \"\",\n\t\t\t`script.timeout = ${/** @type {number} */ (loadTimeout) / 1000};`,\n\t\t\t`if (${RuntimeGlobals.scriptNonce}) {`,\n\t\t\tTemplate.indent(\n\t\t\t\t`script.setAttribute(\"nonce\", ${RuntimeGlobals.scriptNonce});`\n\t\t\t),\n\t\t\t\"}\",\n\t\t\tuniqueName\n\t\t\t\t? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);'\n\t\t\t\t: \"\",\n\t\t\tthis._withFetchPriority\n\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\"if(fetchPriority) {\",\n\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t'script.setAttribute(\"fetchpriority\", fetchPriority);'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t  ])\n\t\t\t\t: \"\",\n\t\t\t`script.src = ${\n\t\t\t\tthis._withCreateScriptUrl\n\t\t\t\t\t? `${RuntimeGlobals.createScriptUrl}(url)`\n\t\t\t\t\t: \"url\"\n\t\t\t};`,\n\t\t\tcrossOriginLoading\n\t\t\t\t? crossOriginLoading === \"use-credentials\"\n\t\t\t\t\t? 'script.crossOrigin = \"use-credentials\";'\n\t\t\t\t\t: Template.asString([\n\t\t\t\t\t\t\t\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\",\n\t\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t\t`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t  ])\n\t\t\t\t: \"\"\n\t\t]);\n\n\t\treturn Template.asString([\n\t\t\t\"var inProgress = {};\",\n\t\t\tuniqueName\n\t\t\t\t? `var dataWebpackPrefix = ${JSON.stringify(uniqueName + \":\")};`\n\t\t\t\t: \"// data-webpack is not used as build has no uniqueName\",\n\t\t\t\"// loadScript function to load a script via script tag\",\n\t\t\t`${fn} = ${runtimeTemplate.basicFunction(\n\t\t\t\t`url, done, key, chunkId${\n\t\t\t\t\tthis._withFetchPriority ? \", fetchPriority\" : \"\"\n\t\t\t\t}`,\n\t\t\t\t[\n\t\t\t\t\t\"if(inProgress[url]) { inProgress[url].push(done); return; }\",\n\t\t\t\t\t\"var script, needAttach;\",\n\t\t\t\t\t\"if(key !== undefined) {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t'var scripts = document.getElementsByTagName(\"script\");',\n\t\t\t\t\t\t\"for(var i = 0; i < scripts.length; i++) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"var s = scripts[i];\",\n\t\t\t\t\t\t\t`if(s.getAttribute(\"src\") == url${\n\t\t\t\t\t\t\t\tuniqueName\n\t\t\t\t\t\t\t\t\t? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key'\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t}) { script = s; break; }`\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"if(!script) {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"needAttach = true;\",\n\t\t\t\t\t\tcreateScript.call(code, /** @type {Chunk} */ (this.chunk))\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"inProgress[url] = [done];\",\n\t\t\t\t\t\"var onScriptComplete = \" +\n\t\t\t\t\t\truntimeTemplate.basicFunction(\n\t\t\t\t\t\t\t\"prev, event\",\n\t\t\t\t\t\t\tTemplate.asString([\n\t\t\t\t\t\t\t\t\"// avoid mem leaks in IE.\",\n\t\t\t\t\t\t\t\t\"script.onerror = script.onload = null;\",\n\t\t\t\t\t\t\t\t\"clearTimeout(timeout);\",\n\t\t\t\t\t\t\t\t\"var doneFns = inProgress[url];\",\n\t\t\t\t\t\t\t\t\"delete inProgress[url];\",\n\t\t\t\t\t\t\t\t\"script.parentNode && script.parentNode.removeChild(script);\",\n\t\t\t\t\t\t\t\t`doneFns && doneFns.forEach(${runtimeTemplate.returningFunction(\n\t\t\t\t\t\t\t\t\t\"fn(event)\",\n\t\t\t\t\t\t\t\t\t\"fn\"\n\t\t\t\t\t\t\t\t)});`,\n\t\t\t\t\t\t\t\t\"if(prev) return prev(event);\"\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t),\n\t\t\t\t\t`var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), ${loadTimeout});`,\n\t\t\t\t\t\"script.onerror = onScriptComplete.bind(null, script.onerror);\",\n\t\t\t\t\t\"script.onload = onScriptComplete.bind(null, script.onload);\",\n\t\t\t\t\t\"needAttach && document.head.appendChild(script);\"\n\t\t\t\t]\n\t\t\t)};`\n\t\t]);\n\t}\n}\n\nmodule.exports = LoadScriptRuntimeModule;\n"]},"metadata":{},"sourceType":"script"}