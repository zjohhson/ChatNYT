{"ast":null,"code":"/* global __resourceQuery */\n\"use strict\";\n\nvar urlBase = decodeURIComponent(__resourceQuery.slice(1));\n/**\n * @param {{ data: string, onError: (err: Error) => void, active: boolean, module: module }} options options\n * @returns {() => void} function to destroy response\n */\n\nexports.keepAlive = function (options) {\n  var data = options.data;\n  var onError = options.onError;\n  var active = options.active;\n  var module = options.module;\n  /** @type {import(\"http\").IncomingMessage} */\n\n  var response;\n  var request = (urlBase.startsWith(\"https\") ? require(\"https\") : require(\"http\")).request(urlBase + data, {\n    agent: false,\n    headers: {\n      accept: \"text/event-stream\"\n    }\n  }, function (res) {\n    response = res;\n    response.on(\"error\", errorHandler);\n\n    if (!active && !module.hot) {\n      console.log(\"Hot Module Replacement is not enabled. Waiting for process restart...\");\n    }\n  });\n  /**\n   * @param {Error} err error\n   */\n\n  function errorHandler(err) {\n    err.message = \"Problem communicating active modules to the server: \" + err.message;\n    onError(err);\n  }\n\n  request.on(\"error\", errorHandler);\n  request.end();\n  return function () {\n    response.destroy();\n  };\n};","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/hot/lazy-compilation-node.js"],"names":["urlBase","decodeURIComponent","__resourceQuery","slice","exports","keepAlive","options","data","onError","active","module","response","request","startsWith","require","agent","headers","accept","res","on","errorHandler","hot","console","log","err","message","end","destroy"],"mappings":"AAAA;AAEA;;AAEA,IAAIA,OAAO,GAAGC,kBAAkB,CAACC,eAAe,CAACC,KAAhB,CAAsB,CAAtB,CAAD,CAAhC;AAEA;AACA;AACA;AACA;;AACAC,OAAO,CAACC,SAAR,GAAoB,UAAUC,OAAV,EAAmB;AACtC,MAAIC,IAAI,GAAGD,OAAO,CAACC,IAAnB;AACA,MAAIC,OAAO,GAAGF,OAAO,CAACE,OAAtB;AACA,MAAIC,MAAM,GAAGH,OAAO,CAACG,MAArB;AACA,MAAIC,MAAM,GAAGJ,OAAO,CAACI,MAArB;AACA;;AACA,MAAIC,QAAJ;AACA,MAAIC,OAAO,GAAG,CACbZ,OAAO,CAACa,UAAR,CAAmB,OAAnB,IAA8BC,OAAO,CAAC,OAAD,CAArC,GAAiDA,OAAO,CAAC,MAAD,CAD3C,EAEZF,OAFY,CAGbZ,OAAO,GAAGO,IAHG,EAIb;AACCQ,IAAAA,KAAK,EAAE,KADR;AAECC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,MAAM,EAAE;AAAV;AAFV,GAJa,EAQb,UAAUC,GAAV,EAAe;AACdP,IAAAA,QAAQ,GAAGO,GAAX;AACAP,IAAAA,QAAQ,CAACQ,EAAT,CAAY,OAAZ,EAAqBC,YAArB;;AACA,QAAI,CAACX,MAAD,IAAW,CAACC,MAAM,CAACW,GAAvB,EAA4B;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CACC,uEADD;AAGA;AACD,GAhBY,CAAd;AAmBA;AACD;AACA;;AACC,WAASH,YAAT,CAAsBI,GAAtB,EAA2B;AAC1BA,IAAAA,GAAG,CAACC,OAAJ,GACC,yDAAyDD,GAAG,CAACC,OAD9D;AAEAjB,IAAAA,OAAO,CAACgB,GAAD,CAAP;AACA;;AACDZ,EAAAA,OAAO,CAACO,EAAR,CAAW,OAAX,EAAoBC,YAApB;AACAR,EAAAA,OAAO,CAACc,GAAR;AACA,SAAO,YAAY;AAClBf,IAAAA,QAAQ,CAACgB,OAAT;AACA,GAFD;AAGA,CAvCD","sourcesContent":["/* global __resourceQuery */\n\n\"use strict\";\n\nvar urlBase = decodeURIComponent(__resourceQuery.slice(1));\n\n/**\n * @param {{ data: string, onError: (err: Error) => void, active: boolean, module: module }} options options\n * @returns {() => void} function to destroy response\n */\nexports.keepAlive = function (options) {\n\tvar data = options.data;\n\tvar onError = options.onError;\n\tvar active = options.active;\n\tvar module = options.module;\n\t/** @type {import(\"http\").IncomingMessage} */\n\tvar response;\n\tvar request = (\n\t\turlBase.startsWith(\"https\") ? require(\"https\") : require(\"http\")\n\t).request(\n\t\turlBase + data,\n\t\t{\n\t\t\tagent: false,\n\t\t\theaders: { accept: \"text/event-stream\" }\n\t\t},\n\t\tfunction (res) {\n\t\t\tresponse = res;\n\t\t\tresponse.on(\"error\", errorHandler);\n\t\t\tif (!active && !module.hot) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"Hot Module Replacement is not enabled. Waiting for process restart...\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t);\n\n\t/**\n\t * @param {Error} err error\n\t */\n\tfunction errorHandler(err) {\n\t\terr.message =\n\t\t\t\"Problem communicating active modules to the server: \" + err.message;\n\t\tonError(err);\n\t}\n\trequest.on(\"error\", errorHandler);\n\trequest.end();\n\treturn function () {\n\t\tresponse.destroy();\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}