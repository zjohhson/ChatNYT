{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Template = require(\"../Template\");\n\nconst {\n  equals\n} = require(\"../util/ArrayHelpers\");\n\nconst {\n  getTrimmedIdsAndRange\n} = require(\"../util/chainedImports\");\n\nconst makeSerializable = require(\"../util/makeSerializable\");\n\nconst propertyAccess = require(\"../util/propertyAccess\");\n\nconst ModuleDependency = require(\"./ModuleDependency\");\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n\n/** @typedef {import(\"../Dependency\")} Dependency */\n\n/** @typedef {import(\"../Dependency\").ReferencedExport} ReferencedExport */\n\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n\n/** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\n\n\nclass CommonJsFullRequireDependency extends ModuleDependency {\n  /**\n   * @param {string} request the request string\n   * @param {Range} range location in source code\n   * @param {string[]} names accessed properties on module\n   * @param {Range[]=} idRanges ranges for members of ids; the two arrays are right-aligned\n   */\n  constructor(request, range, names, idRanges\n  /* TODO webpack 6 make this non-optional. It must always be set to properly trim ids. */\n  ) {\n    super(request);\n    this.range = range;\n    this.names = names;\n    this.idRanges = idRanges;\n    this.call = false;\n    this.asiSafe = undefined;\n  }\n  /**\n   * Returns list of exports referenced by this dependency\n   * @param {ModuleGraph} moduleGraph module graph\n   * @param {RuntimeSpec} runtime the runtime for which the module is analysed\n   * @returns {(string[] | ReferencedExport)[]} referenced exports\n   */\n\n\n  getReferencedExports(moduleGraph, runtime) {\n    if (this.call) {\n      const importedModule = moduleGraph.getModule(this);\n\n      if (!importedModule || importedModule.getExportsType(moduleGraph, false) !== \"namespace\") {\n        return [this.names.slice(0, -1)];\n      }\n    }\n\n    return [this.names];\n  }\n  /**\n   * @param {ObjectSerializerContext} context context\n   */\n\n\n  serialize(context) {\n    const {\n      write\n    } = context;\n    write(this.names);\n    write(this.idRanges);\n    write(this.call);\n    write(this.asiSafe);\n    super.serialize(context);\n  }\n  /**\n   * @param {ObjectDeserializerContext} context context\n   */\n\n\n  deserialize(context) {\n    const {\n      read\n    } = context;\n    this.names = read();\n    this.idRanges = read();\n    this.call = read();\n    this.asiSafe = read();\n    super.deserialize(context);\n  }\n\n  get type() {\n    return \"cjs full require\";\n  }\n\n  get category() {\n    return \"commonjs\";\n  }\n\n}\n\nCommonJsFullRequireDependency.Template = class CommonJsFullRequireDependencyTemplate extends ModuleDependency.Template {\n  /**\n   * @param {Dependency} dependency the dependency for which the template should be applied\n   * @param {ReplaceSource} source the current replace source which can be modified\n   * @param {DependencyTemplateContext} templateContext the context object\n   * @returns {void}\n   */\n  apply(dependency, source, _ref) {\n    let {\n      module,\n      runtimeTemplate,\n      moduleGraph,\n      chunkGraph,\n      runtimeRequirements,\n      runtime,\n      initFragments\n    } = _ref;\n    const dep =\n    /** @type {CommonJsFullRequireDependency} */\n    dependency;\n    if (!dep.range) return;\n    const importedModule = moduleGraph.getModule(dep);\n    let requireExpr = runtimeTemplate.moduleExports({\n      module: importedModule,\n      chunkGraph,\n      request: dep.request,\n      weak: dep.weak,\n      runtimeRequirements\n    });\n    const {\n      trimmedRange: [trimmedRangeStart, trimmedRangeEnd],\n      trimmedIds\n    } = getTrimmedIdsAndRange(dep.names, dep.range, dep.idRanges, moduleGraph, dep);\n\n    if (importedModule) {\n      const usedImported = moduleGraph.getExportsInfo(importedModule).getUsedName(trimmedIds, runtime);\n\n      if (usedImported) {\n        const comment = equals(usedImported, trimmedIds) ? \"\" : Template.toNormalComment(propertyAccess(trimmedIds)) + \" \";\n        const access = `${comment}${propertyAccess(usedImported)}`;\n        requireExpr = dep.asiSafe === true ? `(${requireExpr}${access})` : `${requireExpr}${access}`;\n      }\n    }\n\n    source.replace(trimmedRangeStart, trimmedRangeEnd - 1, requireExpr);\n  }\n\n};\nmakeSerializable(CommonJsFullRequireDependency, \"webpack/lib/dependencies/CommonJsFullRequireDependency\");\nmodule.exports = CommonJsFullRequireDependency;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/dependencies/CommonJsFullRequireDependency.js"],"names":["Template","require","equals","getTrimmedIdsAndRange","makeSerializable","propertyAccess","ModuleDependency","CommonJsFullRequireDependency","constructor","request","range","names","idRanges","call","asiSafe","undefined","getReferencedExports","moduleGraph","runtime","importedModule","getModule","getExportsType","slice","serialize","context","write","deserialize","read","type","category","CommonJsFullRequireDependencyTemplate","apply","dependency","source","module","runtimeTemplate","chunkGraph","runtimeRequirements","initFragments","dep","requireExpr","moduleExports","weak","trimmedRange","trimmedRangeStart","trimmedRangeEnd","trimmedIds","usedImported","getExportsInfo","getUsedName","comment","toNormalComment","access","replace","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst Template = require(\"../Template\");\nconst { equals } = require(\"../util/ArrayHelpers\");\nconst { getTrimmedIdsAndRange } = require(\"../util/chainedImports\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst ModuleDependency = require(\"./ModuleDependency\");\n\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n/** @typedef {import(\"../Dependency\")} Dependency */\n/** @typedef {import(\"../Dependency\").ReferencedExport} ReferencedExport */\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n/** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\n\nclass CommonJsFullRequireDependency extends ModuleDependency {\n\t/**\n\t * @param {string} request the request string\n\t * @param {Range} range location in source code\n\t * @param {string[]} names accessed properties on module\n\t * @param {Range[]=} idRanges ranges for members of ids; the two arrays are right-aligned\n\t */\n\tconstructor(\n\t\trequest,\n\t\trange,\n\t\tnames,\n\t\tidRanges /* TODO webpack 6 make this non-optional. It must always be set to properly trim ids. */\n\t) {\n\t\tsuper(request);\n\t\tthis.range = range;\n\t\tthis.names = names;\n\t\tthis.idRanges = idRanges;\n\t\tthis.call = false;\n\t\tthis.asiSafe = undefined;\n\t}\n\n\t/**\n\t * Returns list of exports referenced by this dependency\n\t * @param {ModuleGraph} moduleGraph module graph\n\t * @param {RuntimeSpec} runtime the runtime for which the module is analysed\n\t * @returns {(string[] | ReferencedExport)[]} referenced exports\n\t */\n\tgetReferencedExports(moduleGraph, runtime) {\n\t\tif (this.call) {\n\t\t\tconst importedModule = moduleGraph.getModule(this);\n\t\t\tif (\n\t\t\t\t!importedModule ||\n\t\t\t\timportedModule.getExportsType(moduleGraph, false) !== \"namespace\"\n\t\t\t) {\n\t\t\t\treturn [this.names.slice(0, -1)];\n\t\t\t}\n\t\t}\n\t\treturn [this.names];\n\t}\n\n\t/**\n\t * @param {ObjectSerializerContext} context context\n\t */\n\tserialize(context) {\n\t\tconst { write } = context;\n\t\twrite(this.names);\n\t\twrite(this.idRanges);\n\t\twrite(this.call);\n\t\twrite(this.asiSafe);\n\t\tsuper.serialize(context);\n\t}\n\n\t/**\n\t * @param {ObjectDeserializerContext} context context\n\t */\n\tdeserialize(context) {\n\t\tconst { read } = context;\n\t\tthis.names = read();\n\t\tthis.idRanges = read();\n\t\tthis.call = read();\n\t\tthis.asiSafe = read();\n\t\tsuper.deserialize(context);\n\t}\n\n\tget type() {\n\t\treturn \"cjs full require\";\n\t}\n\n\tget category() {\n\t\treturn \"commonjs\";\n\t}\n}\n\nCommonJsFullRequireDependency.Template = class CommonJsFullRequireDependencyTemplate extends (\n\tModuleDependency.Template\n) {\n\t/**\n\t * @param {Dependency} dependency the dependency for which the template should be applied\n\t * @param {ReplaceSource} source the current replace source which can be modified\n\t * @param {DependencyTemplateContext} templateContext the context object\n\t * @returns {void}\n\t */\n\tapply(\n\t\tdependency,\n\t\tsource,\n\t\t{\n\t\t\tmodule,\n\t\t\truntimeTemplate,\n\t\t\tmoduleGraph,\n\t\t\tchunkGraph,\n\t\t\truntimeRequirements,\n\t\t\truntime,\n\t\t\tinitFragments\n\t\t}\n\t) {\n\t\tconst dep = /** @type {CommonJsFullRequireDependency} */ (dependency);\n\t\tif (!dep.range) return;\n\t\tconst importedModule = moduleGraph.getModule(dep);\n\t\tlet requireExpr = runtimeTemplate.moduleExports({\n\t\t\tmodule: importedModule,\n\t\t\tchunkGraph,\n\t\t\trequest: dep.request,\n\t\t\tweak: dep.weak,\n\t\t\truntimeRequirements\n\t\t});\n\n\t\tconst {\n\t\t\ttrimmedRange: [trimmedRangeStart, trimmedRangeEnd],\n\t\t\ttrimmedIds\n\t\t} = getTrimmedIdsAndRange(\n\t\t\tdep.names,\n\t\t\tdep.range,\n\t\t\tdep.idRanges,\n\t\t\tmoduleGraph,\n\t\t\tdep\n\t\t);\n\n\t\tif (importedModule) {\n\t\t\tconst usedImported = moduleGraph\n\t\t\t\t.getExportsInfo(importedModule)\n\t\t\t\t.getUsedName(trimmedIds, runtime);\n\t\t\tif (usedImported) {\n\t\t\t\tconst comment = equals(usedImported, trimmedIds)\n\t\t\t\t\t? \"\"\n\t\t\t\t\t: Template.toNormalComment(propertyAccess(trimmedIds)) + \" \";\n\t\t\t\tconst access = `${comment}${propertyAccess(usedImported)}`;\n\t\t\t\trequireExpr =\n\t\t\t\t\tdep.asiSafe === true\n\t\t\t\t\t\t? `(${requireExpr}${access})`\n\t\t\t\t\t\t: `${requireExpr}${access}`;\n\t\t\t}\n\t\t}\n\t\tsource.replace(trimmedRangeStart, trimmedRangeEnd - 1, requireExpr);\n\t}\n};\n\nmakeSerializable(\n\tCommonJsFullRequireDependency,\n\t\"webpack/lib/dependencies/CommonJsFullRequireDependency\"\n);\n\nmodule.exports = CommonJsFullRequireDependency;\n"]},"metadata":{},"sourceType":"script"}