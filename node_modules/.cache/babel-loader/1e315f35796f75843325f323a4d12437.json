{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\"use strict\";\n/** @typedef {import(\"./ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n\n/** @typedef {import(\"./ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n\nconst cache = new WeakMap();\n\nclass ObjectStructure {\n  constructor() {\n    this.keys = undefined;\n    this.children = undefined;\n  }\n\n  getKeys(keys) {\n    if (this.keys === undefined) this.keys = keys;\n    return this.keys;\n  }\n\n  key(key) {\n    if (this.children === undefined) this.children = new Map();\n    const child = this.children.get(key);\n    if (child !== undefined) return child;\n    const newChild = new ObjectStructure();\n    this.children.set(key, newChild);\n    return newChild;\n  }\n\n}\n\nconst getCachedKeys = (keys, cacheAssoc) => {\n  let root = cache.get(cacheAssoc);\n\n  if (root === undefined) {\n    root = new ObjectStructure();\n    cache.set(cacheAssoc, root);\n  }\n\n  let current = root;\n\n  for (const key of keys) {\n    current = current.key(key);\n  }\n\n  return current.getKeys(keys);\n};\n\nclass PlainObjectSerializer {\n  /**\n   * @param {Object} obj plain object\n   * @param {ObjectSerializerContext} context context\n   */\n  serialize(obj, context) {\n    const keys = Object.keys(obj);\n\n    if (keys.length > 128) {\n      // Objects with so many keys are unlikely to share structure\n      // with other objects\n      context.write(keys);\n\n      for (const key of keys) {\n        context.write(obj[key]);\n      }\n    } else if (keys.length > 1) {\n      context.write(getCachedKeys(keys, context.write));\n\n      for (const key of keys) {\n        context.write(obj[key]);\n      }\n    } else if (keys.length === 1) {\n      const key = keys[0];\n      context.write(key);\n      context.write(obj[key]);\n    } else {\n      context.write(null);\n    }\n  }\n  /**\n   * @param {ObjectDeserializerContext} context context\n   * @returns {Object} plain object\n   */\n\n\n  deserialize(context) {\n    const keys = context.read();\n    const obj = {};\n\n    if (Array.isArray(keys)) {\n      for (const key of keys) {\n        obj[key] = context.read();\n      }\n    } else if (keys !== null) {\n      obj[keys] = context.read();\n    }\n\n    return obj;\n  }\n\n}\n\nmodule.exports = PlainObjectSerializer;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/serialization/PlainObjectSerializer.js"],"names":["cache","WeakMap","ObjectStructure","constructor","keys","undefined","children","getKeys","key","Map","child","get","newChild","set","getCachedKeys","cacheAssoc","root","current","PlainObjectSerializer","serialize","obj","context","Object","length","write","deserialize","read","Array","isArray","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\n\"use strict\";\n\n/** @typedef {import(\"./ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n/** @typedef {import(\"./ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n\nconst cache = new WeakMap();\n\nclass ObjectStructure {\n\tconstructor() {\n\t\tthis.keys = undefined;\n\t\tthis.children = undefined;\n\t}\n\n\tgetKeys(keys) {\n\t\tif (this.keys === undefined) this.keys = keys;\n\t\treturn this.keys;\n\t}\n\n\tkey(key) {\n\t\tif (this.children === undefined) this.children = new Map();\n\t\tconst child = this.children.get(key);\n\t\tif (child !== undefined) return child;\n\t\tconst newChild = new ObjectStructure();\n\t\tthis.children.set(key, newChild);\n\t\treturn newChild;\n\t}\n}\n\nconst getCachedKeys = (keys, cacheAssoc) => {\n\tlet root = cache.get(cacheAssoc);\n\tif (root === undefined) {\n\t\troot = new ObjectStructure();\n\t\tcache.set(cacheAssoc, root);\n\t}\n\tlet current = root;\n\tfor (const key of keys) {\n\t\tcurrent = current.key(key);\n\t}\n\treturn current.getKeys(keys);\n};\n\nclass PlainObjectSerializer {\n\t/**\n\t * @param {Object} obj plain object\n\t * @param {ObjectSerializerContext} context context\n\t */\n\tserialize(obj, context) {\n\t\tconst keys = Object.keys(obj);\n\t\tif (keys.length > 128) {\n\t\t\t// Objects with so many keys are unlikely to share structure\n\t\t\t// with other objects\n\t\t\tcontext.write(keys);\n\t\t\tfor (const key of keys) {\n\t\t\t\tcontext.write(obj[key]);\n\t\t\t}\n\t\t} else if (keys.length > 1) {\n\t\t\tcontext.write(getCachedKeys(keys, context.write));\n\t\t\tfor (const key of keys) {\n\t\t\t\tcontext.write(obj[key]);\n\t\t\t}\n\t\t} else if (keys.length === 1) {\n\t\t\tconst key = keys[0];\n\t\t\tcontext.write(key);\n\t\t\tcontext.write(obj[key]);\n\t\t} else {\n\t\t\tcontext.write(null);\n\t\t}\n\t}\n\t/**\n\t * @param {ObjectDeserializerContext} context context\n\t * @returns {Object} plain object\n\t */\n\tdeserialize(context) {\n\t\tconst keys = context.read();\n\t\tconst obj = {};\n\t\tif (Array.isArray(keys)) {\n\t\t\tfor (const key of keys) {\n\t\t\t\tobj[key] = context.read();\n\t\t\t}\n\t\t} else if (keys !== null) {\n\t\t\tobj[keys] = context.read();\n\t\t}\n\t\treturn obj;\n\t}\n}\n\nmodule.exports = PlainObjectSerializer;\n"]},"metadata":{},"sourceType":"script"}