{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\n\nconst WebpackError = require(\"../WebpackError\");\n\nconst {\n  evaluateToString,\n  expressionIsUnsupported,\n  toConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\n\nconst makeSerializable = require(\"../util/makeSerializable\");\n\nconst ConstDependency = require(\"./ConstDependency\");\n\nconst SystemRuntimeModule = require(\"./SystemRuntimeModule\");\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\n\nconst PLUGIN_NAME = \"SystemPlugin\";\n\nclass SystemPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      compilation.hooks.runtimeRequirementInModule.for(RuntimeGlobals.system).tap(PLUGIN_NAME, (module, set) => {\n        set.add(RuntimeGlobals.requireScope);\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.system).tap(PLUGIN_NAME, (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new SystemRuntimeModule());\n      });\n      /**\n       * @param {Parser} parser parser parser\n       * @param {JavascriptParserOptions} parserOptions parserOptions\n       * @returns {void}\n       */\n\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.system === undefined || !parserOptions.system) {\n          return;\n        }\n        /**\n         * @param {string} name name\n         */\n\n\n        const setNotSupported = name => {\n          parser.hooks.evaluateTypeof.for(name).tap(PLUGIN_NAME, evaluateToString(\"undefined\"));\n          parser.hooks.expression.for(name).tap(PLUGIN_NAME, expressionIsUnsupported(parser, name + \" is not supported by webpack.\"));\n        };\n\n        parser.hooks.typeof.for(\"System.import\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"function\")));\n        parser.hooks.evaluateTypeof.for(\"System.import\").tap(PLUGIN_NAME, evaluateToString(\"function\"));\n        parser.hooks.typeof.for(\"System\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"object\")));\n        parser.hooks.evaluateTypeof.for(\"System\").tap(PLUGIN_NAME, evaluateToString(\"object\"));\n        setNotSupported(\"System.set\");\n        setNotSupported(\"System.get\");\n        setNotSupported(\"System.register\");\n        parser.hooks.expression.for(\"System\").tap(PLUGIN_NAME, expr => {\n          const dep = new ConstDependency(RuntimeGlobals.system,\n          /** @type {Range} */\n          expr.range, [RuntimeGlobals.system]);\n          dep.loc =\n          /** @type {DependencyLocation} */\n          expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.call.for(\"System.import\").tap(PLUGIN_NAME, expr => {\n          parser.state.module.addWarning(new SystemImportDeprecationWarning(\n          /** @type {DependencyLocation} */\n          expr.loc));\n          return parser.hooks.importCall.call({\n            type: \"ImportExpression\",\n            source:\n            /** @type {import(\"estree\").Literal} */\n            expr.arguments[0],\n            loc: expr.loc,\n            range: expr.range\n          });\n        });\n      };\n\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n    });\n  }\n\n}\n\nclass SystemImportDeprecationWarning extends WebpackError {\n  /**\n   * @param {DependencyLocation} loc location\n   */\n  constructor(loc) {\n    super(\"System.import() is deprecated and will be removed soon. Use import() instead.\\n\" + \"For more info visit https://webpack.js.org/guides/code-splitting/\");\n    this.name = \"SystemImportDeprecationWarning\";\n    this.loc = loc;\n  }\n\n}\n\nmakeSerializable(SystemImportDeprecationWarning, \"webpack/lib/dependencies/SystemPlugin\", \"SystemImportDeprecationWarning\");\nmodule.exports = SystemPlugin;\nmodule.exports.SystemImportDeprecationWarning = SystemImportDeprecationWarning;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/dependencies/SystemPlugin.js"],"names":["JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","require","RuntimeGlobals","WebpackError","evaluateToString","expressionIsUnsupported","toConstantDependency","makeSerializable","ConstDependency","SystemRuntimeModule","PLUGIN_NAME","SystemPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","runtimeRequirementInModule","for","system","module","set","add","requireScope","runtimeRequirementInTree","chunk","addRuntimeModule","handler","parser","parserOptions","undefined","setNotSupported","name","evaluateTypeof","expression","typeof","JSON","stringify","expr","dep","range","loc","state","addPresentationalDependency","call","addWarning","SystemImportDeprecationWarning","importCall","type","source","arguments","constructor","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst WebpackError = require(\"../WebpackError\");\nconst {\n\tevaluateToString,\n\texpressionIsUnsupported,\n\ttoConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst ConstDependency = require(\"./ConstDependency\");\nconst SystemRuntimeModule = require(\"./SystemRuntimeModule\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\nconst PLUGIN_NAME = \"SystemPlugin\";\n\nclass SystemPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.hooks.runtimeRequirementInModule\n\t\t\t\t\t.for(RuntimeGlobals.system)\n\t\t\t\t\t.tap(PLUGIN_NAME, (module, set) => {\n\t\t\t\t\t\tset.add(RuntimeGlobals.requireScope);\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.system)\n\t\t\t\t\t.tap(PLUGIN_NAME, (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(chunk, new SystemRuntimeModule());\n\t\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * @param {Parser} parser parser parser\n\t\t\t\t * @param {JavascriptParserOptions} parserOptions parserOptions\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (parserOptions.system === undefined || !parserOptions.system) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string} name name\n\t\t\t\t\t */\n\t\t\t\t\tconst setNotSupported = name => {\n\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"undefined\"));\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\t\texpressionIsUnsupported(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tname + \" is not supported by webpack.\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"System.import\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"function\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"System.import\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"function\"));\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"System\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"object\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"System\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"object\"));\n\n\t\t\t\t\tsetNotSupported(\"System.set\");\n\t\t\t\t\tsetNotSupported(\"System.get\");\n\t\t\t\t\tsetNotSupported(\"System.register\");\n\n\t\t\t\t\tparser.hooks.expression.for(\"System\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\tRuntimeGlobals.system,\n\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t[RuntimeGlobals.system]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.call.for(\"System.import\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\tparser.state.module.addWarning(\n\t\t\t\t\t\t\tnew SystemImportDeprecationWarning(\n\t\t\t\t\t\t\t\t/** @type {DependencyLocation} */ (expr.loc)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn parser.hooks.importCall.call({\n\t\t\t\t\t\t\ttype: \"ImportExpression\",\n\t\t\t\t\t\t\tsource:\n\t\t\t\t\t\t\t\t/** @type {import(\"estree\").Literal} */\n\t\t\t\t\t\t\t\t(expr.arguments[0]),\n\t\t\t\t\t\t\tloc: expr.loc,\n\t\t\t\t\t\t\trange: expr.range\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nclass SystemImportDeprecationWarning extends WebpackError {\n\t/**\n\t * @param {DependencyLocation} loc location\n\t */\n\tconstructor(loc) {\n\t\tsuper(\n\t\t\t\"System.import() is deprecated and will be removed soon. Use import() instead.\\n\" +\n\t\t\t\t\"For more info visit https://webpack.js.org/guides/code-splitting/\"\n\t\t);\n\n\t\tthis.name = \"SystemImportDeprecationWarning\";\n\n\t\tthis.loc = loc;\n\t}\n}\n\nmakeSerializable(\n\tSystemImportDeprecationWarning,\n\t\"webpack/lib/dependencies/SystemPlugin\",\n\t\"SystemImportDeprecationWarning\"\n);\n\nmodule.exports = SystemPlugin;\nmodule.exports.SystemImportDeprecationWarning = SystemImportDeprecationWarning;\n"]},"metadata":{},"sourceType":"script"}