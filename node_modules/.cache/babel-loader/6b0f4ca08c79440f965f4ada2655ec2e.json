{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Ivan Kopeykin @vankop\n*/\n\"use strict\";\n\nconst IgnoreErrorModuleFactory = require(\"./IgnoreErrorModuleFactory\");\n\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC,\n  JAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"./ModuleTypeConstants\");\n\nconst WebpackIsIncludedDependency = require(\"./dependencies/WebpackIsIncludedDependency\");\n\nconst {\n  toConstantDependency\n} = require(\"./javascript/JavascriptParserHelpers\");\n/** @typedef {import(\"enhanced-resolve\").Resolver} Resolver */\n\n/** @typedef {import(\"./Compiler\")} Compiler */\n\n/** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n\n/** @typedef {import(\"./Module\")} Module */\n\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n\n/** @typedef {import(\"./javascript/JavascriptParser\").Range} Range */\n\n\nconst PLUGIN_NAME = \"WebpackIsIncludedPlugin\";\n\nclass WebpackIsIncludedPlugin {\n  /**\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      compilation.dependencyFactories.set(WebpackIsIncludedDependency, new IgnoreErrorModuleFactory(normalModuleFactory));\n      compilation.dependencyTemplates.set(WebpackIsIncludedDependency, new WebpackIsIncludedDependency.Template());\n      /**\n       * @param {JavascriptParser} parser the parser\n       * @returns {void}\n       */\n\n      const handler = parser => {\n        parser.hooks.call.for(\"__webpack_is_included__\").tap(PLUGIN_NAME, expr => {\n          if (expr.type !== \"CallExpression\" || expr.arguments.length !== 1 || expr.arguments[0].type === \"SpreadElement\") return;\n          const request = parser.evaluateExpression(expr.arguments[0]);\n          if (!request.isString()) return;\n          const dep = new WebpackIsIncludedDependency(\n          /** @type {string} */\n          request.string,\n          /** @type {Range} */\n          expr.range);\n          dep.loc =\n          /** @type {DependencyLocation} */\n          expr.loc;\n          parser.state.module.addDependency(dep);\n          return true;\n        });\n        parser.hooks.typeof.for(\"__webpack_is_included__\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"function\")));\n      };\n\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_ESM).tap(PLUGIN_NAME, handler);\n    });\n  }\n\n}\n\nmodule.exports = WebpackIsIncludedPlugin;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/WebpackIsIncludedPlugin.js"],"names":["IgnoreErrorModuleFactory","require","JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","JAVASCRIPT_MODULE_TYPE_ESM","WebpackIsIncludedDependency","toConstantDependency","PLUGIN_NAME","WebpackIsIncludedPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","call","for","expr","type","arguments","length","request","evaluateExpression","isString","dep","string","range","loc","state","module","addDependency","typeof","JSON","stringify","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAMA,wBAAwB,GAAGC,OAAO,CAAC,4BAAD,CAAxC;;AACA,MAAM;AACLC,EAAAA,2BADK;AAELC,EAAAA,8BAFK;AAGLC,EAAAA;AAHK,IAIFH,OAAO,CAAC,uBAAD,CAJX;;AAKA,MAAMI,2BAA2B,GAAGJ,OAAO,CAAC,4CAAD,CAA3C;;AACA,MAAM;AACLK,EAAAA;AADK,IAEFL,OAAO,CAAC,sCAAD,CAFX;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;;AAEA,MAAMM,WAAW,GAAG,yBAApB;;AAEA,MAAMC,uBAAN,CAA8B;AAC7B;AACD;AACA;AACA;AACCC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CACCN,WADD,EAEC,CAACK,WAAD,WAA0C;AAAA,UAA5B;AAAEE,QAAAA;AAAF,OAA4B;AACzCF,MAAAA,WAAW,CAACG,mBAAZ,CAAgCC,GAAhC,CACCX,2BADD,EAEC,IAAIL,wBAAJ,CAA6Bc,mBAA7B,CAFD;AAIAF,MAAAA,WAAW,CAACK,mBAAZ,CAAgCD,GAAhC,CACCX,2BADD,EAEC,IAAIA,2BAA2B,CAACa,QAAhC,EAFD;AAKA;AACJ;AACA;AACA;;AACI,YAAMC,OAAO,GAAGC,MAAM,IAAI;AACzBA,QAAAA,MAAM,CAACT,KAAP,CAAaU,IAAb,CACEC,GADF,CACM,yBADN,EAEET,GAFF,CAEMN,WAFN,EAEmBgB,IAAI,IAAI;AACzB,cACCA,IAAI,CAACC,IAAL,KAAc,gBAAd,IACAD,IAAI,CAACE,SAAL,CAAeC,MAAf,KAA0B,CAD1B,IAEAH,IAAI,CAACE,SAAL,CAAe,CAAf,EAAkBD,IAAlB,KAA2B,eAH5B,EAKC;AAED,gBAAMG,OAAO,GAAGP,MAAM,CAACQ,kBAAP,CAA0BL,IAAI,CAACE,SAAL,CAAe,CAAf,CAA1B,CAAhB;AAEA,cAAI,CAACE,OAAO,CAACE,QAAR,EAAL,EAAyB;AAEzB,gBAAMC,GAAG,GAAG,IAAIzB,2BAAJ;AACX;AAAuBsB,UAAAA,OAAO,CAACI,MADpB;AAEX;AAAsBR,UAAAA,IAAI,CAACS,KAFhB,CAAZ;AAIAF,UAAAA,GAAG,CAACG,GAAJ;AAAU;AAAmCV,UAAAA,IAAI,CAACU,GAAlD;AACAb,UAAAA,MAAM,CAACc,KAAP,CAAaC,MAAb,CAAoBC,aAApB,CAAkCN,GAAlC;AACA,iBAAO,IAAP;AACA,SArBF;AAsBAV,QAAAA,MAAM,CAACT,KAAP,CAAa0B,MAAb,CACEf,GADF,CACM,yBADN,EAEET,GAFF,CAGEN,WAHF,EAIED,oBAAoB,CAACc,MAAD,EAASkB,IAAI,CAACC,SAAL,CAAe,UAAf,CAAT,CAJtB;AAMA,OA7BD;;AA8BAzB,MAAAA,mBAAmB,CAACH,KAApB,CAA0BS,MAA1B,CACEE,GADF,CACMpB,2BADN,EAEEW,GAFF,CAEMN,WAFN,EAEmBY,OAFnB;AAGAL,MAAAA,mBAAmB,CAACH,KAApB,CAA0BS,MAA1B,CACEE,GADF,CACMnB,8BADN,EAEEU,GAFF,CAEMN,WAFN,EAEmBY,OAFnB;AAGAL,MAAAA,mBAAmB,CAACH,KAApB,CAA0BS,MAA1B,CACEE,GADF,CACMlB,0BADN,EAEES,GAFF,CAEMN,WAFN,EAEmBY,OAFnB;AAGA,KAvDF;AAyDA;;AA/D4B;;AAkE9BgB,MAAM,CAACK,OAAP,GAAiBhC,uBAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Ivan Kopeykin @vankop\n*/\n\n\"use strict\";\n\nconst IgnoreErrorModuleFactory = require(\"./IgnoreErrorModuleFactory\");\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC,\n\tJAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"./ModuleTypeConstants\");\nconst WebpackIsIncludedDependency = require(\"./dependencies/WebpackIsIncludedDependency\");\nconst {\n\ttoConstantDependency\n} = require(\"./javascript/JavascriptParserHelpers\");\n\n/** @typedef {import(\"enhanced-resolve\").Resolver} Resolver */\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"./Module\")} Module */\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n/** @typedef {import(\"./javascript/JavascriptParser\").Range} Range */\n\nconst PLUGIN_NAME = \"WebpackIsIncludedPlugin\";\n\nclass WebpackIsIncludedPlugin {\n\t/**\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tWebpackIsIncludedDependency,\n\t\t\t\t\tnew IgnoreErrorModuleFactory(normalModuleFactory)\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tWebpackIsIncludedDependency,\n\t\t\t\t\tnew WebpackIsIncludedDependency.Template()\n\t\t\t\t);\n\n\t\t\t\t/**\n\t\t\t\t * @param {JavascriptParser} parser the parser\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst handler = parser => {\n\t\t\t\t\tparser.hooks.call\n\t\t\t\t\t\t.for(\"__webpack_is_included__\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\texpr.type !== \"CallExpression\" ||\n\t\t\t\t\t\t\t\texpr.arguments.length !== 1 ||\n\t\t\t\t\t\t\t\texpr.arguments[0].type === \"SpreadElement\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tconst request = parser.evaluateExpression(expr.arguments[0]);\n\n\t\t\t\t\t\t\tif (!request.isString()) return;\n\n\t\t\t\t\t\t\tconst dep = new WebpackIsIncludedDependency(\n\t\t\t\t\t\t\t\t/** @type {string} */ (request.string),\n\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"__webpack_is_included__\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"function\"))\n\t\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_ESM)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = WebpackIsIncludedPlugin;\n"]},"metadata":{},"sourceType":"script"}