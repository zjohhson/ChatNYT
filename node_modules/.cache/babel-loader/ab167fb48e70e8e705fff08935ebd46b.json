{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  JSON_MODULE_TYPE\n} = require(\"../ModuleTypeConstants\");\n\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\n\nconst JsonGenerator = require(\"./JsonGenerator\");\n\nconst JsonParser = require(\"./JsonParser\");\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @typedef {Record<string, any>} RawJsonData */\n\n\nconst validate = createSchemaValidation(require(\"../../schemas/plugins/JsonModulesPluginParser.check.js\"), () => require(\"../../schemas/plugins/JsonModulesPluginParser.json\"), {\n  name: \"Json Modules Plugin\",\n  baseDataPath: \"parser\"\n});\nconst PLUGIN_NAME = \"JsonModulesPlugin\";\n/**\n * The JsonModulesPlugin is the entrypoint plugin for the json modules feature.\n * It adds the json module type to the compiler and registers the json parser and generator.\n */\n\nclass JsonModulesPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   *\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      normalModuleFactory.hooks.createParser.for(JSON_MODULE_TYPE).tap(PLUGIN_NAME, parserOptions => {\n        validate(parserOptions);\n        return new JsonParser(parserOptions);\n      });\n      normalModuleFactory.hooks.createGenerator.for(JSON_MODULE_TYPE).tap(PLUGIN_NAME, () => {\n        return new JsonGenerator();\n      });\n    });\n  }\n\n}\n\nmodule.exports = JsonModulesPlugin;","map":{"version":3,"sources":["/Users/zachjohnson/Desktop/ChatNYT/node_modules/webpack/lib/json/JsonModulesPlugin.js"],"names":["JSON_MODULE_TYPE","require","createSchemaValidation","JsonGenerator","JsonParser","validate","name","baseDataPath","PLUGIN_NAME","JsonModulesPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","createParser","for","parserOptions","createGenerator","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAuBC,OAAO,CAAC,wBAAD,CAApC;;AACA,MAAMC,sBAAsB,GAAGD,OAAO,CAAC,kCAAD,CAAtC;;AACA,MAAME,aAAa,GAAGF,OAAO,CAAC,iBAAD,CAA7B;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,cAAD,CAA1B;AAEA;;AACA;;;AAEA,MAAMI,QAAQ,GAAGH,sBAAsB,CACtCD,OAAO,CAAC,wDAAD,CAD+B,EAEtC,MAAMA,OAAO,CAAC,oDAAD,CAFyB,EAGtC;AACCK,EAAAA,IAAI,EAAE,qBADP;AAECC,EAAAA,YAAY,EAAE;AAFf,CAHsC,CAAvC;AASA,MAAMC,WAAW,GAAG,mBAApB;AAEA;AACA;AACA;AACA;;AACA,MAAMC,iBAAN,CAAwB;AACvB;AACD;AACA;AACA;AACA;AACA;AACCC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CACCN,WADD,EAEC,CAACK,WAAD,WAA0C;AAAA,UAA5B;AAAEE,QAAAA;AAAF,OAA4B;AACzCA,MAAAA,mBAAmB,CAACH,KAApB,CAA0BI,YAA1B,CACEC,GADF,CACMjB,gBADN,EAEEc,GAFF,CAEMN,WAFN,EAEmBU,aAAa,IAAI;AAClCb,QAAAA,QAAQ,CAACa,aAAD,CAAR;AAEA,eAAO,IAAId,UAAJ,CAAec,aAAf,CAAP;AACA,OANF;AAOAH,MAAAA,mBAAmB,CAACH,KAApB,CAA0BO,eAA1B,CACEF,GADF,CACMjB,gBADN,EAEEc,GAFF,CAEMN,WAFN,EAEmB,MAAM;AACvB,eAAO,IAAIL,aAAJ,EAAP;AACA,OAJF;AAKA,KAfF;AAiBA;;AAzBsB;;AA4BxBiB,MAAM,CAACC,OAAP,GAAiBZ,iBAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { JSON_MODULE_TYPE } = require(\"../ModuleTypeConstants\");\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\nconst JsonGenerator = require(\"./JsonGenerator\");\nconst JsonParser = require(\"./JsonParser\");\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {Record<string, any>} RawJsonData */\n\nconst validate = createSchemaValidation(\n\trequire(\"../../schemas/plugins/JsonModulesPluginParser.check.js\"),\n\t() => require(\"../../schemas/plugins/JsonModulesPluginParser.json\"),\n\t{\n\t\tname: \"Json Modules Plugin\",\n\t\tbaseDataPath: \"parser\"\n\t}\n);\n\nconst PLUGIN_NAME = \"JsonModulesPlugin\";\n\n/**\n * The JsonModulesPlugin is the entrypoint plugin for the json modules feature.\n * It adds the json module type to the compiler and registers the json parser and generator.\n */\nclass JsonModulesPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t *\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tnormalModuleFactory.hooks.createParser\n\t\t\t\t\t.for(JSON_MODULE_TYPE)\n\t\t\t\t\t.tap(PLUGIN_NAME, parserOptions => {\n\t\t\t\t\t\tvalidate(parserOptions);\n\n\t\t\t\t\t\treturn new JsonParser(parserOptions);\n\t\t\t\t\t});\n\t\t\t\tnormalModuleFactory.hooks.createGenerator\n\t\t\t\t\t.for(JSON_MODULE_TYPE)\n\t\t\t\t\t.tap(PLUGIN_NAME, () => {\n\t\t\t\t\t\treturn new JsonGenerator();\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = JsonModulesPlugin;\n"]},"metadata":{},"sourceType":"script"}